/**
 * @author wingbot.ai
 */
'use strict';

const PHONE_REGEX = /((00|\+)[\s-]?[0-9]{1,4})?[\s-]?([0-9]{3,4}[\s-]?([0-9]{2,3}[\s-]?[0-9]{2}[\s-]?[0-9]{2,3}|[0-9]{3,4}[\s-]?[0-9]{3,4}))/g;
const EMAIL_REGEX = /[^@\s]+@[^.@\s]+\.[^@\s]+/g;
const NUMERIC_CODE = /^[a-z0-9]*[0-9][a-z0-9]*$/ig;

function anonymize (text = '') {
    let word = `${text}`;

    if (word.match(PHONE_REGEX)) {
        word = word.replace(PHONE_REGEX, '@PHONE');
    }

    if (word.match(EMAIL_REGEX)) {
        word = word.replace(EMAIL_REGEX, '@EMAIL');
    }

    if (word.match(NUMERIC_CODE)) {
        word = word.replace(NUMERIC_CODE, '@CODE');
    }

    return word;
}

module.exports = anonymize;
