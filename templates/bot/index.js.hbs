/*
 * @author wingbot.ai
 */
'use strict';

{{#if messenger}}
const { Facebook } = require('wingbot-facebook');
const attachmentCache = require('../lib/attachmentCache');
{{/if}}
{{#if botService}}
const { BotService } = require('wingbot-botservice');
{{/if}}
const config = require('../config');
{{#if storeConversationHistory}}
const chatLogStorage = require('../lib/chatLogStorage');
{{/if}}
const processor = require('./processor');
const botFactory = require('./bot');
const botSettings = require('./botSettings');

{{#if messenger}}
const channel = new Facebook(
    processor,
    Object.assign({ attachmentCache }, config.facebook){{#if storeConversationHistory}},
    chatLogStorage{{/if}}
);
{{/if}}
{{#if botService}}
const channel = new BotService(processor, config.botService{{#if storeConversationHistory}}, chatLogStorage{{/if}});
{{/if}}

module.exports = {
    botSettings,
    botFactory,
    channel
};
